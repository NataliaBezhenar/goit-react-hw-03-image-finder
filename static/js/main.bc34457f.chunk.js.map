{"version":3,"sources":["components/Modal/Modal.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","services/fetchApi.js","components/Loader/Loader.js","App.js","index.js"],"names":["modalRoot","document","querySelector","Modal","handleKeydown","e","code","props","onClose","handleOverlayClick","target","currentTarget","window","addEventListener","this","removeEventListener","content","createPortal","className","onClick","src","alt","Component","Searchbar","state","searchQuery","handleSubmit","preventDefault","trim","onSubmit","toast","handleQueryChange","setState","value","toLowerCase","type","autoComplete","autoFocus","placeholder","onChange","ImageGalleryItem","modalContent","id","onItemClick","webformatURL","tags","ImageGallery","output","loading","handleOpenModal","images","map","image","Button","onLoadMoreClick","fetchImages","search","page","queryString","encodeURIComponent","fetch","then","res","json","Spinner","color","height","width","timeout","App","showModal","status","error","hideLoadMoreBtn","handleScroll","scrollTo","top","documentElement","scrollHeight","behavior","toggleLoadMoreBtn","getImages","hits","length","catch","toggleModal","modalContentShow","itemId","element","find","largeImageURL","handleFormSubmit","handleLoadMoreBtnClick","prevProps","showBtn","result","autoClose","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bc34457f.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport \"./Modal.css\";\nimport PropTypes from \"prop-types\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeydown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeydown);\n  }\n\n  handleKeydown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.onClose();\n    }\n  };\n\n  handleOverlayClick = (e) => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { content } = this.props;\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleOverlayClick}>\n        <div className=\"Modal\">\n          <img src={content} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n\nModal.propTypes = {\n  content: PropTypes.string,\n};\n","import \"./Searchbar.css\";\nimport { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport PropTypes from \"prop-types\";\nimport { ImSearch } from \"react-icons/im\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nexport default class Searchbar extends Component {\n  state = { searchQuery: \"\" };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    if (this.state.searchQuery.trim() === \"\") {\n      toast(\"Please enter search query\");\n      return;\n    }\n    this.props.onSubmit(this.state.searchQuery);\n  };\n\n  handleQueryChange = (e) => {\n    this.setState({ searchQuery: e.currentTarget.value.toLowerCase() });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button\n            type=\"button\"\n            className=\"SearchForm-button\"\n            onClick={this.handleSubmit}\n          >\n            <ImSearch />\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.searchQuery}\n            onChange={this.handleQueryChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./ImageGalleryItem.css\";\n\nexport default class ImageGalleryItem extends Component {\n  modalContent = (id) => {\n    this.props.onItemClick(id);\n  };\n\n  render() {\n    const { id, webformatURL, tags } = this.props;\n\n    return (\n      <img\n        src={webformatURL}\n        alt={tags}\n        className=\"ImageGalleryItem-image\"\n        onClick={() => this.modalContent(id)}\n      />\n    );\n  }\n}\n\nImageGalleryItem.propTypes = {\n  id: PropTypes.number,\n  webformatURL: PropTypes.string,\n  tags: PropTypes.string,\n};\n","import { Component } from \"react\";\nimport \"./ImageGallery.css\";\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport PropTypes from \"prop-types\";\n\nexport default class ImageGallery extends Component {\n  state = { output: null, loading: false };\n\n  handleOpenModal = (e) => {\n    if (e.target !== e.currentTarget) {\n      this.props.onClick();\n    }\n  };\n\n  render() {\n    const { images, onItemClick } = this.props;\n    return (\n      <ul className=\"ImageGallery\" onClick={this.handleOpenModal}>\n        {images &&\n          images.map((image) => (\n            <li key={image.id} className=\"ImageGalleryItem\">\n              <ImageGalleryItem {...image} onItemClick={onItemClick} />\n            </li>\n          ))}\n      </ul>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    })\n  ).isRequired,\n  onClick: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n};\n","import PropTypes from \"prop-types\";\r\nimport \"./Button.css\";\r\nexport default function Button({ onLoadMoreClick }) {\r\n  return (\r\n    <button type=\"button\" className=\"Button\" onClick={onLoadMoreClick}>\r\n      Load More\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onLoadMoreClick: PropTypes.func.isRequired,\r\n};\r\n","const APP_KEY = \"16152697-2240022566bfb10dd1cf00ec5\";\nexport const PER_PAGE = 12;\nconst URL = \"https://pixabay.com/api/?key=\";\n\nexport function fetchImages(search, page) {\n  const queryString = `${URL}${APP_KEY}&q=${encodeURIComponent(\n    search\n  )}&per_page=${PER_PAGE}&page=${page}&image_type=photo&orientation=horizontal`;\n\n  return fetch(queryString).then((res) => res.json());\n}\n","import { Component } from \"react\";\nimport Loader from \"react-loader-spinner\";\n\nexport default class Spinner extends Component {\n  render() {\n    return (\n      <div>\n        <Loader\n          type=\"Puff\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={3000}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport { ToastContainer } from \"react-toastify\";\n\nimport Modal from \"./components/Modal\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport Button from \"./components/Button\";\nimport { fetchImages, PER_PAGE } from \"./services/fetchApi\";\nimport Spinner from \"./components/Loader\";\n\nclass App extends Component {\n  state = {\n    showModal: false,\n    modalContent: \"\",\n    searchQuery: \"\",\n    status: \"idle\",\n    output: [],\n    page: 1,\n    error: null,\n    hideLoadMoreBtn: false,\n  };\n\n  componentDidUpdate(prevProps, { searchQuery, page }) {\n    if (searchQuery !== this.state.searchQuery) {\n      this.setState({ status: \"pending\" });\n    }\n    if (searchQuery !== this.state.searchQuery || page !== this.state.page) {\n      this.getImages();\n    }\n    this.handleScroll();\n  }\n\n  handleScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  toggleLoadMoreBtn = () => {\n    this.setState(({ hideLoadMoreBtn }) => ({\n      hideLoadMoreBtn: !hideLoadMoreBtn,\n    }));\n  };\n\n  getImages = () => {\n    const { searchQuery, page } = this.state;\n    fetchImages(searchQuery, page)\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          this.setState({ status: \"rejected\" });\n          return;\n        }\n        if (hits.length < PER_PAGE) {\n          this.toggleLoadMoreBtn();\n        }\n        this.setState(({ output }) => {\n          return {\n            output: [...output, ...hits],\n            status: \"resolved\",\n          };\n        });\n      })\n      .catch((error) => this.setState({ error, status: \"rejected\" }));\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  modalContentShow = (itemId) => {\n    const { output } = this.state;\n    const element = output.find(({ id }) => id === itemId);\n    this.setState({ modalContent: element.largeImageURL });\n  };\n\n  handleFormSubmit = (searchQuery) => {\n    this.setState({ searchQuery, page: 1, output: [], hideLoadMoreBtn: false });\n  };\n\n  handleLoadMoreBtnClick = () => {\n    this.setState(({ page }) => {\n      return {\n        page: page + 1,\n      };\n    });\n  };\n\n  modalContentShow = (itemId) => {\n    const { output } = this.state;\n    const element = output.find(({ id }) => id === itemId);\n    this.setState({ modalContent: element.largeImageURL });\n  };\n\n  render() {\n    const { showModal, output, modalContent, status, hideLoadMoreBtn } =\n      this.state;\n    const showBtn =\n      output.length > 0 && status !== \"rejected\" && !hideLoadMoreBtn;\n\n    let result = null;\n    if (status === \"idle\") {\n      result = (\n        <div className=\"TextBlock\">\n          <h2>Enter search query</h2>\n        </div>\n      );\n    }\n\n    if (status === \"pending\") {\n      result = (\n        <div className=\"Wrapper\">\n          <Spinner />\n        </div>\n      );\n    }\n\n    if (status === \"rejected\") {\n      result = (\n        <div className=\"TextBlock\">\n          <h2>Nothing was found on your query. Please try again</h2>\n        </div>\n      );\n    }\n\n    if (status === \"resolved\") {\n      result = (\n        <ImageGallery\n          images={output}\n          onClick={this.toggleModal}\n          onItemClick={this.modalContentShow}\n        />\n      );\n    }\n\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        {result}\n        {showBtn && (\n          <div className=\"Wrapper\">\n            <Button onLoadMoreClick={this.handleLoadMoreBtnClick} />\n          </div>\n        )}\n        {showModal && (\n          <Modal content={modalContent} onClose={this.toggleModal} />\n        )}\n        <ToastContainer autoClose={3000} position=\"top-center\" />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}